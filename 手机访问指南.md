# 📱 手机访问本地开发环境

## 你的电脑局域网 IP
```
192.168.20.101
```

---

## ✅ 已完成配置

1. **后端**：绑定 `0.0.0.0:8000` ✅
2. **前端**：配置 `host: '0.0.0.0'` ✅
3. **API 地址**：改为 `http://192.168.20.101:8000` ✅

---

## 🚀 现在需要做

### 1️⃣ 重启前端（重要！）

修改了配置，必须重启前端：

```bash
# 按 Ctrl+C 停止前端，然后：
cd frontend
npm run dev
```

会看到：
```
➜  Local:   http://localhost:3000/
➜  Network: http://192.168.20.101:3000/  👈 用这个
```

### 2️⃣ 确认后端运行

```bash
cd backend
venv\Scripts\activate
uvicorn app.main:app --reload --host 0.0.0.0 --port 8000
```

### 3️⃣ 配置防火墙

**打开 Windows PowerShell（管理员）**，运行：

```powershell
# 允许端口 3000 和 8000
New-NetFirewallRule -DisplayName "Dev Server 3000" -Direction Inbound -LocalPort 3000 -Protocol TCP -Action Allow
New-NetFirewallRule -DisplayName "Dev Server 8000" -Direction Inbound -LocalPort 8000 -Protocol TCP -Action Allow
```

或者手动设置：
1. 控制面板 → Windows Defender 防火墙 → 高级设置
2. 入站规则 → 新建规则
3. 端口 → TCP → 输入 `3000,8000`
4. 允许连接 → 完成

---

## 📱 手机访问

### 确保手机连同一个 WiFi

手机和电脑必须在同一个网络！

### 在手机浏览器输入：

**前端**：
```
http://192.168.20.101:3000
```

**后端 API 测试**：
```
http://192.168.20.101:8000/health
```

---

## 🔍 如果无法访问

### 检查 1：同一网络
- 手机和电脑在同一个 WiFi
- 不能用手机流量

### 检查 2：前端已重启
- 修改配置后必须重启前端
- `Ctrl+C` 停止，重新 `npm run dev`

### 检查 3：防火墙
- 运行上面的 PowerShell 命令
- 或临时关闭防火墙测试

### 检查 4：后端 CORS
确认 CORS 允许局域网访问

---

## 访问地址对照表

| 设备 | 前端 | 后端 |
|------|------|------|
| 电脑 | http://localhost:3000 | http://localhost:8000 |
| 手机 | http://192.168.20.101:3000 | http://192.168.20.101:8000 |

---

## 💡 提示

- 电脑不能睡眠/锁屏
- IP 可能会变，重启电脑后重新查 `ipconfig`
- 平时开发用 `localhost` 就好，测试手机时才改 IP
