# 📱 手机访问指南

## ✅ 配置完成！

你的系统现在可以通过手机访问了！

---

## 📍 访问地址

### 在手机上打开以下地址：

**前端应用**:
```
http://192.168.178.127:3000
```

**后端 API**:
```
http://192.168.178.127:8000
```

---

## ⚠️ 重要前提

### 1. 手机和电脑必须在同一个 WiFi 网络

确保：
- ✅ 手机连接的 WiFi 和电脑一样
- ✅ 不要使用移动数据
- ✅ 电脑没有开启防火墙阻止访问

### 2. 检查防火墙设置

如果手机无法访问，可能需要允许防火墙：

**macOS 防火墙设置**:
1. 打开 **系统设置** > **网络**
2. 点击 **防火墙**
3. 如果防火墙已启用：
   - 点击 **选项**
   - 确保允许 Node 和 Python 的传入连接
   - 或者临时关闭防火墙测试

---

## 📱 在手机上使用

### 步骤 1: 打开浏览器

在手机的 Safari（iOS）或 Chrome（Android）中输入：
```
http://192.168.178.127:3000
```

### 步骤 2: 注册/登录

- 注册新账号或使用已有账号登录
- 推荐使用：`worker@test.de` / `password123`

### 步骤 3: 添加到主屏幕（PWA）

**iOS (Safari)**:
1. 点击底部的 **分享** 按钮
2. 滚动找到 **添加到主屏幕**
3. 点击 **添加**
4. 现在可以像 App 一样使用！

**Android (Chrome)**:
1. 点击右上角的 **三个点**
2. 选择 **添加到主屏幕**
3. 点击 **添加**
4. 现在可以像 App 一样使用！

---

## 🔧 故障排除

### 问题 1: 无法连接

**尝试以下方法**:

1. **确认在同一网络**:
   ```bash
   # 在电脑上检查 IP
   ipconfig getifaddr en0
   ```

2. **测试连接**:
   在手机浏览器输入：
   ```
   http://192.168.178.127:8000/health
   ```
   应该看到：`{"status":"healthy",...}`

3. **重启服务**:
   ```bash
   # 停止并重启前端
   cd /Users/yuqiao/baustelle-system/frontend
   npm run dev -- --host 0.0.0.0
   ```

4. **检查电脑防火墙**:
   - macOS: 系统设置 > 网络 > 防火墙
   - 临时关闭防火墙测试

### 问题 2: 可以访问但功能不正常

**检查后端连接**:
1. 确认 `.env` 文件已更新为 IP 地址
2. 浏览器控制台检查 API 请求
3. 确保使用的是 `http://192.168.178.127:8000` 而不是 `localhost`

### 问题 3: IP 地址变化

如果电脑重启或重新连接 WiFi，IP 可能会变：

1. **获取新 IP**:
   ```bash
   ipconfig getifaddr en0
   ```

2. **更新前端配置**:
   编辑 `/Users/yuqiao/baustelle-system/frontend/.env`
   ```env
   VITE_API_URL=http://新IP:8000
   ```

3. **重启前端**:
   ```bash
   cd frontend
   npm run dev -- --host 0.0.0.0
   ```

---

## 💡 提示

### 固定 IP 地址（推荐）

为避免 IP 变化，可以在路由器设置 DHCP 静态分配：

1. 登录路由器管理界面
2. 找到 DHCP 设置
3. 为你的电脑 MAC 地址绑定固定 IP

### 性能优化

手机访问时：
- ✅ 图片会自动优化
- ✅ 使用触摸手势
- ✅ 可以离线访问（PWA）
- ✅ 可以接收推送通知

### 安全提示

- ⚠️ 不要在公共 WiFi 使用
- ⚠️ 建议只在家庭/办公室网络使用
- ⚠️ 生产环境需要 HTTPS

---

## 🌐 网络架构

当前设置：
```
手机 (192.168.178.xxx)
    ↓
WiFi 路由器
    ↓
电脑 (192.168.178.127)
    ↓ 端口 3000 → 前端
    ↓ 端口 8000 → 后端
        ↓
    Supabase 云端数据库
```

---

## 📊 访问测试

### 测试清单

- [ ] 手机可以打开 http://192.168.178.127:3000
- [ ] 可以看到登录页面
- [ ] 可以注册/登录
- [ ] 可以创建申请
- [ ] 可以查看列表
- [ ] 图片和样式正常加载

### 如果全部通过

🎉 **恭喜！手机访问设置成功！**

现在可以：
- 📱 在手机上像 App 一样使用
- 🔄 实时同步数据
- 📴 离线查看数据（PWA）
- 🔔 接收通知（如果启用）

---

## 🚀 下一步

1. **添加到主屏幕** - 像原生 App 一样使用
2. **创建多个账号** - 测试不同角色
3. **邀请团队** - 让其他人也可以访问

---

**当前访问地址**:
- 📱 手机: http://192.168.178.127:3000
- 💻 电脑: http://localhost:3000 或 http://192.168.178.127:3000

**享受移动办公！** 🎉
